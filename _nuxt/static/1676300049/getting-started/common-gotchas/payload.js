__NUXT_JSONP__("/getting-started/common-gotchas", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az){return {data:[{document:{slug:"common-gotchas",description:"Here are some common gotchas that might cause your code to not work with Synapsis",title:"Common Gotchas",position:4,version:1,category:"Getting Started",toc:[{id:R,depth:D,text:S},{id:T,depth:I,text:"Ensure backtest.json uses USDT as Quote Account"},{id:U,depth:I,text:V},{id:W,depth:D,text:X},{id:Y,depth:D,text:Z},{id:_,depth:D,text:$},{id:aa,depth:I,text:ab}],body:{type:"root",children:[{type:b,tag:q,props:{},children:[{type:a,value:"It happens all the time. When the code works on someone else's computer but not yours. Unfortunately, as much as we try to handle every use case. Some times we miss some things.\nFortunately, if you have an issue, we're readily available to help you out! Submit an issue on our "},{type:b,tag:n,props:{href:"https:\u002F\u002Fgithub.com\u002FSynapsis-Finance\u002FSynapsis",rel:[J,K,L],target:M},children:[{type:a,value:"GitHub"}]},{type:a,value:" or message us in "},{type:b,tag:n,props:{href:"https:\u002F\u002Fdiscord.gg\u002FxJAjGEAXNS",rel:[J,K,L],target:M},children:[{type:a,value:"Discord"}]},{type:a,value:" and we'll respond as soon as possible!"}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"That being said, here are a couple of Synapsis gotchas that we've seen so far."}]},{type:a,value:f},{type:b,tag:E,props:{id:R},children:[{type:b,tag:n,props:{href:"#switching-your-code-to-binance-and-non-usd-exchanges",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:S}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"At Synapsis, we try to support as many exchanges as possible, and with the rise of crypto exchanges, there has arisen the issue that not every exchange supports USD. A key example of this is Binance that has all base currency done in "},{type:b,tag:n,props:{href:"https:\u002F\u002Ftether.to\u002Fen\u002F",rel:[J,K,L],target:M},children:[{type:b,tag:g,props:{},children:[{type:a,value:"USDT"}]},{type:a,value:" (Tether USD)"}]},{type:a,value:". Unfortunately, as much as we'd like our code to be easily switchable, there are a few gotchas in order to make sure that your backtests and settings run correctly."}]},{type:a,value:f},{type:b,tag:N,props:{id:T},children:[{type:b,tag:n,props:{href:"#ensure-backtestjson-uses-usdt-as-quote-account",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:"Ensure "},{type:b,tag:g,props:{},children:[{type:a,value:ac}]},{type:a,value:" uses USDT as Quote Account"}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"Under backtest.json, there are a wide variety of settings to allow your backtests to run correctly and the way that you want. One of these is being able to easily quote your account value in any asset you'd like (this could be in "},{type:b,tag:g,props:{},children:[{type:a,value:"AAPL"}]},{type:a,value:ad},{type:b,tag:g,props:{},children:[{type:a,value:"BTC"}]},{type:a,value:" if you really wanted to). By default, for Coinbase Pro, Alpaca, and OANDA, this is in USD. However for Binance, FTX, Kucoin, and all non-usd exchanges, we have to quote in USDT as USD is not supported. In order to do this we change "},{type:b,tag:g,props:{},children:[{type:a,value:"quote_account_value_in"}]},{type:a,value:" to 'USDT' to get this "},{type:b,tag:g,props:{},children:[{type:a,value:ac}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:x,props:{className:[y]},children:[{type:b,tag:z,props:{className:[A,O]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"price_data\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"assets\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:" ...\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"quote_account_value_in\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"\n    ....\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:N,props:{id:U},children:[{type:b,tag:n,props:{href:"#check-your-binance-tld",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:V}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"If you're an international Binance user, you must also make sure you change your "},{type:b,tag:g,props:{},children:[{type:a,value:"binance_tld"}]},{type:a,value:" in "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" to "},{type:b,tag:g,props:{},children:[{type:a,value:"com"}]},{type:a,value:" instead of the default of "},{type:b,tag:g,props:{},children:[{type:a,value:"us"}]},{type:a,value:". Because we support both binance, this is how we separate between the two and allow your keys to work perfectly. If you're in the US, make sure you keep the default `us'"}]},{type:a,value:f},{type:b,tag:x,props:{className:[y]},children:[{type:b,tag:z,props:{className:[A,O]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"use_sandbox\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"use_sandbox_websockets\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"websocket_buffer_size\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:"10000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"test_connectivity_on_auth\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"binance\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"binance_tld\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"\"com\""}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"\n    ...\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:E,props:{id:W},children:[{type:b,tag:n,props:{href:"#are-you-using-sandbox-keys",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:X}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"Because we support both paper-trading environments and live trading, we allow users to input not just live keys but also sandbox keys that utilize various exchange's sandbox mode."}]},{type:a,value:f},{type:b,tag:"alert",props:{type:"info"},children:[{type:a,value:"\n    Note, not all of the exchanges support sandbox mode (FTX for example does not). In this case, Synapsis has a "},{type:b,tag:"nuxt-link",props:{to:"\u002FAPI\u002Fsandbox_trading"},children:[{type:a,value:"different way"}]},{type:a,value:" to do paper trading for these exchanges. \n"}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"Thus, ensuring that you properly have "},{type:b,tag:g,props:{},children:[{type:a,value:"use_sandbox"}]},{type:a,value:" to be "},{type:b,tag:g,props:{},children:[{type:a,value:o}]},{type:a,value:ad},{type:b,tag:g,props:{},children:[{type:a,value:F}]},{type:a,value:" is critical in the "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:". Synapsis will also throw an error if it detect sandbox keys."}]},{type:a,value:f},{type:b,tag:E,props:{id:Y},children:[{type:b,tag:n,props:{href:"#i-cant-short-on-alpaca",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:Z}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"Alpaca shorting right now is a feature that is supported and is enabled by default. However, if you can't seem to short, make sure that in your "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" you have "},{type:b,tag:g,props:{},children:[{type:a,value:"enable_shorting"}]},{type:a,value:" to be set to true."}]},{type:a,value:f},{type:b,tag:x,props:{className:[y]},children:[{type:b,tag:z,props:{className:[A,O]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"...\n\n"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"alpaca\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"websocket_stream\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"\"iex\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"\"USD\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"enable_shorting\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\"use_yfinance\""}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:F}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"\n\n...\n"}]}]}]},{type:a,value:f},{type:b,tag:E,props:{id:_},children:[{type:b,tag:n,props:{href:"#im-getting-an-invalidordererror-and-my-trades-arent-going-through",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:$}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"Trades not going through can be caused by a multitude of reasons that may range from incorrect quantity calculation, to not having enough money in the account. However, the most critical gotcha that we typically is when we see the transition from Alpaca to a crypto asset."}]},{type:a,value:f},{type:b,tag:N,props:{id:aa},children:[{type:b,tag:n,props:{href:"#switching-from-alpaca-to-crypto",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ab}]},{type:a,value:f},{type:b,tag:q,props:{},children:[{type:a,value:"Currently alpaca does not allow for fractional trading. Thus, all quantity calculations must be casted to an integer. However, for crypto, we can't do this. Thankfully Synapsis has a "},{type:b,tag:g,props:{},children:[{type:a,value:"synapsis.trunc()"}]},{type:a,value:" function to help us out."}]},{type:a,value:f},{type:b,tag:aj,props:{id:"alpaca-quantity-calculation"},children:[{type:b,tag:n,props:{href:"#alpaca-quantity-calculation",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:"Alpaca Quantity Calculation"}]},{type:a,value:f},{type:b,tag:x,props:{className:[y]},children:[{type:b,tag:z,props:{className:[A,ak]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,al]},children:[{type:a,value:am}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,an]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:G}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:at}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,"builtin"]},children:[{type:a,value:"int"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:G}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:av}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ay]},children:[{type:a,value:"# must be cast to an int"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aj,props:{id:"crypto-quantity-calculation"},children:[{type:b,tag:n,props:{href:"#crypto-quantity-calculation",ariaHidden:o,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:"Crypto Quantity Calculation"}]},{type:a,value:f},{type:b,tag:x,props:{className:[y]},children:[{type:b,tag:z,props:{className:[A,ak]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,al]},children:[{type:a,value:am}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,an]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:G}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:at}]},{type:a,value:" synapsis"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"trunc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:G}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:av}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:"2"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ay]},children:[{type:a,value:"# must reduce floating precision to 2 decimal places"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f}]}]}]}]},dir:"\u002Fen\u002Fgetting-started",path:"\u002Fen\u002Fgetting-started\u002Fcommon-gotchas",extension:".md",createdAt:az,updatedAt:az,to:"\u002Fgetting-started\u002Fcommon-gotchas"},prev:{slug:"tutorial",title:"Installation",to:"\u002Fgetting-started\u002Ftutorial"},next:{slug:"getting-started",title:"Getting Started with Futures",to:"\u002Ffutures\u002Fgetting-started"}}],fetch:[],mutations:[]}}("text","element","span","token","punctuation","\n","code"," ","operator",":","property",",",".","a","true","\n    ","p",-1,"icon","icon-link","{","}","\n      ","div","nuxt-content-highlight","pre","line-numbers","string","boolean",2,"h2","false","(",")",3,"nofollow","noopener","noreferrer","_blank","h3","language-json","\n  ","settings.json","switching-your-code-to-binance-and-non-usd-exchanges","Switching Your Code to Binance and Non-USD Exchanges","ensure-backtestjson-uses-usdt-as-quote-account","check-your-binance-tld","Check Your Binance TLD","are-you-using-sandbox-keys","Are You Using Sandbox Keys?","i-cant-short-on-alpaca","I Can't Short on Alpaca","im-getting-an-invalidordererror-and-my-trades-arent-going-through","I'm Getting an InvalidOrderError and My Trades Aren't Going Through","switching-from-alpaca-to-crypto","Switching from Alpaca to Crypto","backtest.json"," or ","\"settings\"","\n    ...\n    ","\"USDT\"","number","\"cash\"","h4","language-python","keyword","def","function","price_event","price"," symbol"," state","\n    qty ","=","price ","\u002F"," interface","cash","comment","2023-02-13T14:52:33.297Z")));