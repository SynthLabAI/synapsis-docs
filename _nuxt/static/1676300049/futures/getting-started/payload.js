__NUXT_JSONP__("/futures/getting-started", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM){return {data:[{document:{slug:"getting-started",description:aa,title:"Getting Started with Futures",position:5,version:1,category:"Futures",toc:[{id:ab,depth:H,text:ac},{id:ad,depth:H,text:ae},{id:af,depth:H,text:ag},{id:ah,depth:H,text:ai},{id:aj,depth:H,text:ak}],body:{type:"root",children:[{type:b,tag:h,props:{},children:[{type:a,value:aa}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Getting started with futures trading on synapsis is slightly more involved than SPOT markets since it is one of our newest features.\nThis page will aim to guide you through it, and in the future we hope to make the process more streamlined so you can focus on building trading algorithms."}]},{type:a,value:f},{type:b,tag:I,props:{id:ab},children:[{type:b,tag:q,props:{href:"#initializing-with-the-cli",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:ac}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"You will need the "},{type:b,tag:"nuxt-link",props:{to:"\u002Fgetting-started\u002Finstallation"},children:[{type:a,value:"synapsis CLI installed"}]},{type:a,value:". If you've already done this you can skip this step. Otherwise the CLI can be installed through "},{type:b,tag:j,props:{},children:[{type:a,value:"pip"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,al]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"$ pip "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"install"}]},{type:a,value:" synapsis\n"}]}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Then, create a new directory for your project to live in, "},{type:b,tag:j,props:{},children:[{type:a,value:am}]},{type:a,value:" into it, and run "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,al]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"$ "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"mkdir"}]},{type:a,value:" my-futures-model\n$ "},{type:b,tag:c,props:{className:[d,Q,"class-name"]},children:[{type:a,value:am}]},{type:a,value:" my-futures-model\n$ synapsis init\n"}]}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"If running "},{type:b,tag:j,props:{},children:[{type:a,value:"synapsis"}]},{type:a,value:" fails with a \"command not found\" error, this can mean that you don't have your PATH setup properly. Check out this "},{type:b,tag:q,props:{href:"https:\u002F\u002Fwww.makeuseof.com\u002Fpython-windows-path\u002F",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"tutorial"}]},{type:a,value:g}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Alternatively, you can work around this issue by adding "},{type:b,tag:j,props:{},children:[{type:a,value:"python -m"}]},{type:a,value:" before the "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:" command, so the entire line becomes: "},{type:b,tag:j,props:{},children:[{type:a,value:"python -m synapsis init"}]},{type:a,value:" (You can do this for any synapsis command)."}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:as}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"The CLI will ask you a few questions about your model. Please read the following section before answering each one."}]},{type:a,value:f},{type:b,tag:K,props:{id:"what-exchange-would-you-like-to-connect-to"},children:[{type:b,tag:q,props:{href:"#what-exchange-would-you-like-to-connect-to",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:"What exchange would you like to connect to?"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:"Futures Markets are only supported by Binance and FTX"}]},{type:a,value:". If you will only be backtesting and\u002For don't have a preference, we recommend Binance."}]},{type:a,value:f},{type:b,tag:K,props:{id:"what-type-of-model-do-you-want-to-create"},children:[{type:b,tag:q,props:{href:"#what-type-of-model-do-you-want-to-create",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:"What type of model do you want to create?"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Futures screeners are not yet supported. "},{type:b,tag:C,props:{},children:[{type:a,value:"Pick strategy for this one"}]},{type:a,value:g}]},{type:a,value:f},{type:b,tag:K,props:{id:"what-template-would-you-like-to-use-for-your-new-model"},children:[{type:b,tag:q,props:{href:"#what-template-would-you-like-to-use-for-your-new-model",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:"What template would you like to use for your new model?"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:"Pick none"}]},{type:a,value:". The templates are for SPOT Markets and won't work for futures."}]},{type:a,value:f},{type:b,tag:K,props:{id:"would-you-like-to-add-keys-for-this-exchange"},children:[{type:b,tag:q,props:{href:"#would-you-like-to-add-keys-for-this-exchange",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:"Would you like to add keys for this exchange?"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:"You will need exchange keys to download historical data for backtesting"}]},{type:a,value:".\nYou can always add these later by running "},{type:b,tag:j,props:{},children:[{type:a,value:"synapsis key add"}]},{type:a,value:g}]},{type:a,value:f},{type:b,tag:K,props:{id:"would-you-like-to-connect-this-model-to-the-synapsis-platform"},children:[{type:b,tag:q,props:{href:"#would-you-like-to-connect-this-model-to-the-synapsis-platform",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:"Would you like to connect this model to the Synapsis Platform?"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"The Synapsis Platform doesn't support Futures trading yet. "},{type:b,tag:C,props:{},children:[{type:a,value:"Select NO for this one"}]},{type:a,value:g}]},{type:a,value:f},{type:b,tag:I,props:{id:ad},children:[{type:b,tag:q,props:{href:"#futures-setup",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:ae}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"If all went well, the CLI will have generated a bunch of files that your model needs to run. Open up "},{type:b,tag:j,props:{},children:[{type:a,value:"bot.py"}]},{type:a,value:" to get started."}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"This code is for SPOT markets. We will need to change it to make our model run on perpetual contracts instead."}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Add these lines at the top of your file:"}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,L]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:" synapsis "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:S}]},{type:a,value:" futures\n"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"futures "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:S}]},{type:a,value:" FuturesStrategyState\n"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"futures"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"utils "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:S}]},{type:a,value:" close_position\n"}]}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"And change these two lines:"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"exchange = synapsis.Binance()"}]},{type:a,value:au},{type:b,tag:j,props:{},children:[{type:a,value:"exchange = futures.BinanceFutures()"}]},{type:a,value:" (If you are using FTX, this is "},{type:b,tag:j,props:{},children:[{type:a,value:"FTXFutures"}]},{type:a,value:" instead.)"}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"strategy = synapsis.Strategy(exchange)"}]},{type:a,value:au},{type:b,tag:j,props:{},children:[{type:a,value:"strategy = futures.FuturesStrategy(exchange)"}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:as}]},{type:a,value:": For Binance, you likely also want to change 'USD' on the last line of the script to 'USDT'."}]},{type:a,value:f},{type:b,tag:I,props:{id:af},children:[{type:b,tag:q,props:{href:"#adding-a-price-event",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:ag}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Price events are very similar to SPOT price events."}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,L]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# This function is new!"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# This will get run every day and passed the current price of the contract"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:T}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"print"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"'current price:'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ax}]},{type:a,value:" __name__ "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"=="}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"\"__main__\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n    exchange "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"BinanceFutures"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n    strategy "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"FuturesStrategy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"exchange"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# This line is new!"}]},{type:a,value:"\n    strategy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:I,props:{id:ah},children:[{type:b,tag:q,props:{href:"#placing-orders",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:ai}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Let's buy a short position if the price rises more than $1,000 in a day:"}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,L]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:T}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n  prev_price "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:"\n  position "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"get_position"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# if the price rose more than 1,000 and we don't already have a short position, then short sell"}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ax}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"not"}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aF}]},{type:a,value:" price "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:_}]},{type:a,value:" prev_price "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"\u003E="}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"1000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n    order_size "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"cash "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"\u002F"}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"*"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"0.99"}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:aH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"SELL"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" order_size"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# if the price stablized and we *do* have a short position, close our position."}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"elif"}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aF}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"price "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:_}]},{type:a,value:" prev_price"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"\u003C="}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"100"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# we use abs(position['size']) here because position['size'] can (and will) be negative, since we have taken a short position."}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:aH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"BUY"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"position"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"'size'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" reduce_only"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:"True"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n  state"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:" price\n"}]}]}]},{type:a,value:f},{type:b,tag:I,props:{id:aj},children:[{type:b,tag:q,props:{href:"#init-and-teardown",ariaHidden:t,tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w]},children:[]}]},{type:a,value:ak}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Almost done.\nLet's add some code to give the algo some context (right now the first call to price_event will always error because "},{type:b,tag:j,props:{},children:[{type:a,value:"state.variables['prev_price']"}]},{type:a,value:" doesn't exist yet).\nWe can close our short position after when the algo shuts down or we finish our backtest by adding "},{type:b,tag:j,props:{},children:[{type:a,value:"teardown=close_position"}]},{type:a,value:" to our price event."}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Add our init functions:"}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,L]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# This function will be run before our algorithm starts"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:T}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# Close any open positions"}]},{type:a,value:"\n    close_position"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"# Give the algo the previous price as context"}]},{type:a,value:"\n    last_price "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"history"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" to"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" return_as"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"'deque'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"resolution"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"'close'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:" last_price\n"}]}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"Then change the strategy.add_price_event line to this:"}]},{type:a,value:f},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,L]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"strategy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" init"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" teardown"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"close_position"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:h,props:{},children:[{type:a,value:"You've just implemented a super simple Futures strategy! The completed example can be found "},{type:b,tag:q,props:{href:"https:\u002F\u002Fgithub.com\u002Fsynapsis-finance\u002Fsynapsis\u002Fblob\u002Fmain\u002Fexamples\u002Ffutures_tutorial.py",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"here"}]},{type:a,value:g}]}]},dir:"\u002Fen\u002Ffutures",path:"\u002Fen\u002Ffutures\u002Fgetting-started",extension:".md",createdAt:aM,updatedAt:aM,to:"\u002Ffutures\u002Fgetting-started"},prev:{slug:"common-gotchas",title:"Common Gotchas",to:"\u002Fgetting-started\u002Fcommon-gotchas"},next:{slug:"why-synapsis",title:"Why Synapsis?",to:"\u002Fgetting-started\u002Fwhy-synapsis"}}],fetch:[],mutations:[]}}("text","element","span","token","punctuation","\n",".","p","operator","code",",","=","keyword","(",")"," ","a","string",":","true",-1,"icon","icon-link","comment","div","nuxt-content-highlight","pre","line-numbers","strong"," state","[","]","symbol",2,"h2","function","h4","language-python","interface","number","price_event"," symbol","builtin","from","import","def"," FuturesStrategyState","\n    ","\n\n    "," resolution","variables","'prev_price'","-","\n    state","Synapsis is the first open-source platform to support backtesting futures.","initializing-with-the-cli","Initializing with the CLI","futures-setup","Futures Setup","adding-a-price-event","Adding a price event","placing-orders","Placing orders","init-and-teardown","Init and teardown","language-bash","cd","synapsis init","nofollow","noopener","noreferrer","_blank","Important"," synapsis"," -\u003E ","price"," price","if"," futures","add_price_event","'BTC-USDT'","'1d'","\n\n  ","\n  "," position ","and","state","market_order"," Side","abs","init","1","2023-02-13T14:52:33.297Z")));